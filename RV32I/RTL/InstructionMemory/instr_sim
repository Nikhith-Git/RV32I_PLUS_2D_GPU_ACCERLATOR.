#! /usr/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib64/ivl/system.vpi";
:vpi_module "/usr/lib64/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib64/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib64/ivl/v2005_math.vpi";
:vpi_module "/usr/lib64/ivl/va_math.vpi";
S_0xaaab30b5e8e0 .scope module, "tb_instr_mem" "tb_instr_mem" 2 3;
 .timescale -9 -12;
v0xaaab30b8f560_0 .var "addr", 31 0;
v0xaaab30b8f620_0 .net "instruction", 31 0, L_0xaaab30b9fa40;  1 drivers
v0xaaab30b8f6c0_0 .var "rst", 0 0;
S_0xaaab30b72030 .scope module, "uut" "instr_mem" 2 10, 3 3 0, S_0xaaab30b5e8e0;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "rst";
    .port_info 1 /INPUT 32 "addr";
    .port_info 2 /OUTPUT 32 "instruction";
L_0xffff31340018 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0xaaab30b72210_0 .net/2u *"_ivl_0", 31 0, L_0xffff31340018;  1 drivers
v0xaaab30b8efb0_0 .net *"_ivl_2", 31 0, L_0xaaab30b9f800;  1 drivers
v0xaaab30b8f090_0 .net *"_ivl_5", 29 0, L_0xaaab30b9f900;  1 drivers
v0xaaab30b8f150_0 .net "addr", 31 0, v0xaaab30b8f560_0;  1 drivers
v0xaaab30b8f230_0 .net "instruction", 31 0, L_0xaaab30b9fa40;  alias, 1 drivers
v0xaaab30b8f360 .array "memory", 255 0, 31 0;
v0xaaab30b8f420_0 .net "rst", 0 0, v0xaaab30b8f6c0_0;  1 drivers
L_0xaaab30b9f800 .array/port v0xaaab30b8f360, L_0xaaab30b9f900;
L_0xaaab30b9f900 .part v0xaaab30b8f560_0, 2, 30;
L_0xaaab30b9fa40 .functor MUXZ 32, L_0xaaab30b9f800, L_0xffff31340018, v0xaaab30b8f6c0_0, C4<>;
    .scope S_0xaaab30b72030;
T_0 ;
    %vpi_call 3 12 "$readmemh", "program1.hex", v0xaaab30b8f360 {0 0 0};
    %end;
    .thread T_0;
    .scope S_0xaaab30b5e8e0;
T_1 ;
    %vpi_call 2 17 "$dumpfile", "instr_mem_wave.vcd" {0 0 0};
    %vpi_call 2 18 "$dumpvars", 32'sb00000000000000000000000000000000, S_0xaaab30b5e8e0 {0 0 0};
    %vpi_call 2 20 "$display", "\012=== Instruction Memory Test ===\012" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0xaaab30b8f6c0_0, 0, 1;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0xaaab30b8f560_0, 0, 32;
    %delay 10000, 0;
    %vpi_call 2 26 "$display", "TEST 1 - Reset active:" {0 0 0};
    %vpi_call 2 27 "$display", "  addr=0x%08h, rst=%b \342\206\222 instruction=0x%08h", v0xaaab30b8f560_0, v0xaaab30b8f6c0_0, v0xaaab30b8f620_0 {0 0 0};
    %load/vec4 v0xaaab30b8f620_0;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_1.0, 4;
    %vpi_call 2 29 "$display", "  PASS: Output is 0 during reset\012" {0 0 0};
    %jmp T_1.1;
T_1.0 ;
    %vpi_call 2 31 "$display", "  FAIL: Expected 0x00000000\012" {0 0 0};
T_1.1 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0xaaab30b8f6c0_0, 0, 1;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0xaaab30b8f560_0, 0, 32;
    %delay 10000, 0;
    %vpi_call 2 39 "$display", "TEST 2 - Address 0x00:" {0 0 0};
    %vpi_call 2 40 "$display", "  addr=0x%08h \342\206\222 instruction=0x%08h", v0xaaab30b8f560_0, v0xaaab30b8f620_0 {0 0 0};
    %load/vec4 v0xaaab30b8f620_0;
    %cmpi/e 5243027, 0, 32;
    %jmp/0xz  T_1.2, 4;
    %vpi_call 2 42 "$display", "  PASS\012" {0 0 0};
    %jmp T_1.3;
T_1.2 ;
    %vpi_call 2 44 "$display", "  FAIL: Expected 0x00500093\012" {0 0 0};
T_1.3 ;
    %pushi/vec4 4, 0, 32;
    %store/vec4 v0xaaab30b8f560_0, 0, 32;
    %delay 10000, 0;
    %vpi_call 2 49 "$display", "TEST 3 - Address 0x04:" {0 0 0};
    %vpi_call 2 50 "$display", "  addr=0x%08h \342\206\222 instruction=0x%08h", v0xaaab30b8f560_0, v0xaaab30b8f620_0 {0 0 0};
    %load/vec4 v0xaaab30b8f620_0;
    %cmpi/e 10486035, 0, 32;
    %jmp/0xz  T_1.4, 4;
    %vpi_call 2 52 "$display", "  PASS\012" {0 0 0};
    %jmp T_1.5;
T_1.4 ;
    %vpi_call 2 54 "$display", "  FAIL: Expected 0x00A00113\012" {0 0 0};
T_1.5 ;
    %pushi/vec4 8, 0, 32;
    %store/vec4 v0xaaab30b8f560_0, 0, 32;
    %delay 10000, 0;
    %vpi_call 2 59 "$display", "TEST 4 - Address 0x08:" {0 0 0};
    %vpi_call 2 60 "$display", "  addr=0x%08h \342\206\222 instruction=0x%08h", v0xaaab30b8f560_0, v0xaaab30b8f620_0 {0 0 0};
    %load/vec4 v0xaaab30b8f620_0;
    %cmpi/e 2130355, 0, 32;
    %jmp/0xz  T_1.6, 4;
    %vpi_call 2 62 "$display", "  PASS\012" {0 0 0};
    %jmp T_1.7;
T_1.6 ;
    %vpi_call 2 64 "$display", "  FAIL: Expected 0x002081B3\012" {0 0 0};
T_1.7 ;
    %pushi/vec4 12, 0, 32;
    %store/vec4 v0xaaab30b8f560_0, 0, 32;
    %delay 10000, 0;
    %vpi_call 2 69 "$display", "TEST 5 - Address 0x0C:" {0 0 0};
    %vpi_call 2 70 "$display", "  addr=0x%08h \342\206\222 instruction=0x%08h", v0xaaab30b8f560_0, v0xaaab30b8f620_0 {0 0 0};
    %load/vec4 v0xaaab30b8f620_0;
    %cmpi/e 19, 0, 32;
    %jmp/0xz  T_1.8, 4;
    %vpi_call 2 72 "$display", "  PASS\012" {0 0 0};
    %jmp T_1.9;
T_1.8 ;
    %vpi_call 2 74 "$display", "  FAIL: Expected 0x00000013\012" {0 0 0};
T_1.9 ;
    %vpi_call 2 76 "$display", "=== All Tests Complete ===\012" {0 0 0};
    %vpi_call 2 77 "$finish" {0 0 0};
    %end;
    .thread T_1;
# The file index is used to find the file name in the following table.
:file_names 4;
    "N/A";
    "<interactive>";
    "tb_instr_mem.v";
    "instr_mem.v";
